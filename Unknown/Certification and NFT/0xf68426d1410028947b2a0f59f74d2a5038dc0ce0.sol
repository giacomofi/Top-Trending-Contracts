['pragma solidity ^0.4.10; \n', '//Ezlab 2016 all-rights reserved support@ezlab.it\n', '//special purpose contract for CantinaVolpone further info https://agrichain.it/d/0x160564d346f6e9fb3d93c034f207ecf9791b7739\n', '//v.1609rev17042701 some optimization for costreduction\n', '//common base contract\n', 'contract BaseAgriChainContract {\n', '    address creator; \n', '    bool public isSealed;\n', '    function BaseAgriChainContract() public    {  creator = msg.sender; EventCreated(this,creator); }\n', '    modifier onlyIfNotSealed() //semantic when sealed is not possible to change sensible data\n', '    {\n', '        if (isSealed)\n', '            throw;\n', '        _;\n', '    }\n', '\n', '    modifier onlyBy(address _account) //semantic only _account can operate\n', '    {\n', '        if (msg.sender != _account)\n', '            throw;\n', '        _;\n', '    }\n', '    \n', '    function kill() onlyBy(creator)   { suicide(creator); }     \n', '    function setCreator(address _creator)  onlyBy(creator)  { creator = _creator;     }\n', '    function setSealed()  onlyBy(creator)  { isSealed = true;  EventSealed(this);   } //seal down contract not reversible\n', '\n', '    event EventCreated(address self,address creator);\n', '    event EventSealed(address self); //invoked when contract is sealed\n', '    event EventChanged(address self,string property); // generic property change\n', '    event EventChangedInt32(address self,string property,int32 value); //Int32 property change\n', '    event EventChangedString(address self,string property,string value); //string property Change\n', '    event EventChangedAddress(address self,string property,address value); //address property Changed\n', '    \n', '  \n', '}\n', '\n', '\n', '//ChainedContract\n', 'contract AgriChainContract   is BaseAgriChainContract    \n', '{     string public AgriChainType;\n', '      address public  AgriChainNextData;\n', '      address public  AgriChainPrevData;\n', '      address public  AgriChainRootData;\n', '    \n', '    function   AgriChainDataContract() public\n', '    {\n', '        AgriChainNextData=address(this);\n', '        AgriChainPrevData=address(this);\n', '        AgriChainRootData=address(this);\n', '    }\n', '    \n', '     \n', '      \n', '      \n', '      \n', '    function setChain(string _Type,address _Next,address _Prev, address _Root)  onlyBy(creator)  \n', '    {\n', '         AgriChainType=_Type;\n', '         AgriChainNextData=_Next;\n', '         AgriChainPrevData=_Prev;\n', '         AgriChainRootData=_Root;\n', "         EventChanged(this,'Chain');\n", '    }\n', '    \n', '     function setChainNext(address _Next)  onlyBy(creator)  \n', '    {\n', '         AgriChainNextData=_Next;\n', "         EventChangedAddress(this,'ChainNext',_Next);\n", '    }\n', '   \n', '\n', '    function setChainPrev(address _Prev)  onlyBy(creator)  \n', '    {\n', '         AgriChainPrevData=_Prev;\n', "         EventChangedAddress(this,'ChainNext',_Prev);\n", '    }\n', '    \n', '   \n', '   function setChainRoot(address _Root)  onlyBy(creator)  \n', '    {\n', '         AgriChainRootData=_Root;\n', "         EventChangedAddress(this,'ChainRoot',_Root);\n", '    }\n', '    \n', '     function setChainType(string _Type)  onlyBy(creator)  \n', '    {\n', '         AgriChainType=_Type;\n', "         EventChangedString(this,'ChainType',_Type);\n", '    }\n', '      \n', '}\n', '\n', '\n', '// Master activities \n', 'contract AgriChainMasterContract   is AgriChainContract    \n', '{  \n', '    address public  AgriChainContext;  //Context Data Chain\n', '    address public  AgriChainCultivation;  //Cultivation Data Chain\n', '    address public  AgriChainProduction;   //Production Data Chain\n', '    address public  AgriChainDistribution; //Distribution Data Chain\n', '    address public  AgriChainDocuments; //Distribution Data Chain\n', '\n', '    function   AgriChainMasterContract() public\n', '    { \n', '       AgriChainContext=address(this);\n', '       AgriChainCultivation=address(this);\n', '       AgriChainProduction=address(this);\n', '       AgriChainDistribution=address(this);\n', '       \n', '    }\n', '    function setAgriChainProduction(address _AgriChain)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainProduction = _AgriChain;\n', "         EventChangedAddress(this,'AgriChainProduction',_AgriChain);\n", '    }\n', '    function setAgriChainCultivation(address _AgriChain)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainCultivation = _AgriChain;\n', "         EventChangedAddress(this,'AgriChainCultivation',_AgriChain);\n", '    }\n', '    function setAgriChainDistribution(address _AgriChain)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainDistribution = _AgriChain;\n', "         EventChangedAddress(this,'AgriChainDistribution',_AgriChain);\n", '    }\n', '    \n', '    function setAgriChainDocuments(address _AgriChain)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainDocuments = _AgriChain;\n', "         EventChangedAddress(this,'AgriChainDocuments',_AgriChain);\n", '    }\n', '    function setAgriChainContext(address _AgriChain)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainContext = _AgriChain;\n', "         EventChangedAddress(this,'AgriChainContext',_AgriChain);\n", '    }\n', '    \n', '}\n', '\n', '\n', '\n', '// legacy production contract \n', 'contract AgriChainProductionContract   is BaseAgriChainContract    \n', '{  \n', '    string  public  Organization;      //Production Organization\n', '    string  public  Product ;          //Product\n', '    string  public  Description ;      //Description\n', '    address public  AgriChainData;     //ProductionData\n', '    string  public  AgriChainSeal;     //SecuritySeal\n', '    string  public  Notes ;\n', '    \n', '    function   AgriChainProductionContract() public\n', '    { \n', '       AgriChainData=address(this);\n', '    }\n', '    \n', '    function setOrganization(string _Organization)  onlyBy(creator)  onlyIfNotSealed()\n', '    {\n', '          Organization = _Organization;\n', "          EventChangedString(this,'Organization',_Organization);\n", '\n', '    }\n', '    \n', '    function setProduct(string _Product)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '          Product = _Product;\n', "          EventChangedString(this,'Product',_Product);\n", '        \n', '    }\n', '    \n', '    function setDescription(string _Description)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '          Description = _Description;\n', "          EventChangedString(this,'Description',_Description);\n", '    }\n', '    function setAgriChainData(address _AgriChainData)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainData = _AgriChainData;\n', "         EventChangedAddress(this,'AgriChainData',_AgriChainData);\n", '    }\n', '    \n', '    \n', '    function setAgriChainSeal(string _AgriChainSeal)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainSeal = _AgriChainSeal;\n', "         EventChangedString(this,'AgriChainSeal',_AgriChainSeal);\n", '    }\n', '    \n', '    \n', '     \n', '    function setNotes(string _Notes)  onlyBy(creator)\n', '    {\n', '         Notes =  _Notes;\n', "         EventChanged(this,'Notes');\n", '    }\n', '}\n', '\n', '\n', '\n', '//LoggedData\n', 'contract AgriChainDataContract   is AgriChainContract    \n', '{  \n', '      string public AgriChainLabel;\n', '      string public AgriChainLabelInt;\n', '      string public AgriChainDescription;\n', '      string public AgriChainDescriptionInt;\n', '      \n', '    \n', '    //main language data  \n', '    function setData(string _Label,string _Description)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         \n', '          AgriChainLabel=_Label;\n', '          AgriChainDescription=_Description;\n', "          EventChanged(this,'Data');\n", '    }\n', '   \n', '    //International language data\n', '    function setDataInt(string _LabelInt,string _DescriptionInt)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '          \n', '          AgriChainLabelInt=_LabelInt;\n', '          AgriChainDescriptionInt=_DescriptionInt;\n', "          EventChanged(this,'DataInt');\n", '    }\n', '   \n', '      \n', '}\n', '\n', '//External DocumentData\n', '//the extenal document is hashed  and chained as described by this contract\n', 'contract AgriChainDocumentContract   is AgriChainDataContract    \n', '{  \n', '     \n', '    string  public  Emitter;      //Organization\n', '\n', '    string  public  Name;         //Name\n', '    string  public  NameInt;         //Name International\n', '\n', '    string  public  FileName;     //FileName\n', '    string  public  FileHash;     //FileHash\n', '    string  public  FileData;     //FileData\n', '   \n', '    string  public  FileNameInt;  //FileName International\n', '    string  public  FileHashInt;  //FileHash International\n', '    string  public  FileDataInt;  //FileData International\n', '\n', '    string  public  Notes ;\n', '    address public  CurrentRevision; \n', '    \n', '    function   AgriChainDocumentContract() public\n', '    {\n', '        CurrentRevision=address(this);\n', '    }\n', '    \n', '    function setDocumentData(string _Emitter,string _Name, string _FileName,string _FileHash,string _FileData)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '          Emitter=_Emitter;\n', '          Name=_Name;\n', '          FileName=_FileName;\n', '          FileHash=_FileHash;\n', '          FileData=_FileData;          \n', "          EventChanged(this,'setDocumentData');\n", '       \n', '    } \n', '    \n', '    function setCurrentRevision(address _Revision)  onlyBy(creator)  \n', '    {\n', '          CurrentRevision = _Revision;\n', "          EventChangedAddress(this,'CurrentRevision',_Revision);\n", '        \n', '    } \n', '     \n', '     \n', '    function setNotes(string _Notes)  onlyBy(creator)\n', '    {\n', '         Notes =  _Notes;\n', '         \n', '    }\n', '}\n', '\n', '\n', '//Production Quntity counter contract\n', '//the spedified production si accounted by this contract\n', 'contract AgriChainProductionLotContract   is AgriChainDataContract    \n', '{  \n', '    \n', '     int32  public QuantityInitial;\n', '     int32  public QuantityAvailable;\n', '     string public QuantityUnit;\n', '    \n', '    function InitQuantity(int32 _Initial,string _Unit)  onlyBy(creator)  onlyIfNotSealed()\n', '    {\n', '          QuantityInitial = _Initial;\n', '          QuantityAvailable = _Initial;\n', '          QuantityUnit = _Unit;\n', "          EventChangedInt32(this,'QuantityInitial',_Initial);\n", '\n', '    }\n', '  \n', '    function UseQuantity(int32 _Use)  onlyBy(creator)  \n', '    {\n', '          QuantityAvailable = QuantityAvailable-_Use;\n', "          EventChangedInt32(this,'QuantityAvailable',QuantityAvailable);\n", '\n', '    }\n', '  \n', '}']