['pragma solidity ^0.4.18; \n', '//v.1609rev1801 Ezlab 2016-2018 all-rights reseved <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1d6e686d6d726f695d7867717c7f337469">[email&#160;protected]</a>\n', '//special purpose contract for  further info use case  https://agrichain.it/d/v1801\n', '\n', '//common base contract\n', 'contract BaseAgriChainContract {\n', '    address creator; \n', '    bool public isSealed;\n', '    function BaseAgriChainContract() public    {  creator = msg.sender; EventCreated(this,creator); }\n', '    modifier onlyIfNotSealed() //semantic when sealed is not possible to change sensible data\n', '    {\n', '        if (isSealed)\n', '            throw;\n', '        _;\n', '    }\n', '\n', '    modifier onlyBy(address _account) //semantic only _account can operate\n', '    {\n', '        if (msg.sender != _account)\n', '            throw;\n', '        _;\n', '    }\n', '    \n', '    function kill() onlyBy(creator)   { suicide(creator); }     \n', '    function setCreator(address _creator)  onlyBy(creator)  { creator = _creator;     }\n', '    function setSealed()  onlyBy(creator)  { isSealed = true;  EventSealed(this);   } //seal down contract not reversible\n', '\n', '    event EventCreated(address self,address creator);\n', '    event EventSealed(address self); //invoked when contract is sealed\n', '    event EventChanged(address self,string property); // generic property change\n', '    event EventChangedInt32(address self,string property,int32 value); //Int32 property change\n', '    event EventChangedString(address self,string property,string value); //string property Change\n', '    event EventChangedAddress(address self,string property,address value); //address property Changed\n', '    \n', '  \n', '}\n', '\n', '\n', '//ChainedContract\n', 'contract AgriChainContract   is BaseAgriChainContract    \n', '{     string public AgriChainType;\n', '      address public  AgriChainNextData;\n', '      address public  AgriChainPrevData;\n', '      address public  AgriChainRootData;\n', '    \n', '    function   AgriChainDataContract() public\n', '    {\n', '        AgriChainNextData=address(this);\n', '        AgriChainPrevData=address(this);\n', '        AgriChainRootData=address(this);\n', '    }\n', '    \n', '     \n', '      \n', '      \n', '      \n', '    function setChain(string _Type,address _Next,address _Prev, address _Root)  onlyBy(creator)  \n', '    {\n', '         AgriChainType=_Type;\n', '         AgriChainNextData=_Next;\n', '         AgriChainPrevData=_Prev;\n', '         AgriChainRootData=_Root;\n', '         EventChanged(this,&#39;Chain&#39;);\n', '    }\n', '    \n', '     function setChainNext(address _Next)  onlyBy(creator)  \n', '    {\n', '         AgriChainNextData=_Next;\n', '         EventChangedAddress(this,&#39;ChainNext&#39;,_Next);\n', '    }\n', '   \n', '\n', '    function setChainPrev(address _Prev)  onlyBy(creator)  \n', '    {\n', '         AgriChainPrevData=_Prev;\n', '         EventChangedAddress(this,&#39;ChainNext&#39;,_Prev);\n', '    }\n', '    \n', '   \n', '   function setChainRoot(address _Root)  onlyBy(creator)  \n', '    {\n', '         AgriChainRootData=_Root;\n', '         EventChangedAddress(this,&#39;ChainRoot&#39;,_Root);\n', '    }\n', '    \n', '     function setChainType(string _Type)  onlyBy(creator)  \n', '    {\n', '         AgriChainType=_Type;\n', '         EventChangedString(this,&#39;ChainType&#39;,_Type);\n', '    }\n', '      \n', '}\n', '\n', '\n', '// Master activities \n', 'contract AgriChainMasterContract   is AgriChainContract    \n', '{  \n', '    address public  AgriChainContext;  //Context Data Chain\n', '    address public  AgriChainCultivation;  //Cultivation Data Chain\n', '    address public  AgriChainProduction;   //Production Data Chain\n', '    address public  AgriChainDistribution; //Distribution Data Chain\n', '    address public  AgriChainDocuments; //Distribution Data Chain\n', '\n', '    function   AgriChainMasterContract() public\n', '    { \n', '       AgriChainContext=address(this);\n', '       AgriChainCultivation=address(this);\n', '       AgriChainProduction=address(this);\n', '       AgriChainDistribution=address(this);\n', '       \n', '    }\n', '    function setAgriChainProduction(address _AgriChain)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainProduction = _AgriChain;\n', '         EventChangedAddress(this,&#39;AgriChainProduction&#39;,_AgriChain);\n', '    }\n', '    function setAgriChainCultivation(address _AgriChain)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainCultivation = _AgriChain;\n', '         EventChangedAddress(this,&#39;AgriChainCultivation&#39;,_AgriChain);\n', '    }\n', '    function setAgriChainDistribution(address _AgriChain)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainDistribution = _AgriChain;\n', '         EventChangedAddress(this,&#39;AgriChainDistribution&#39;,_AgriChain);\n', '    }\n', '    \n', '    function setAgriChainDocuments(address _AgriChain)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainDocuments = _AgriChain;\n', '         EventChangedAddress(this,&#39;AgriChainDocuments&#39;,_AgriChain);\n', '    }\n', '    function setAgriChainContext(address _AgriChain)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainContext = _AgriChain;\n', '         EventChangedAddress(this,&#39;AgriChainContext&#39;,_AgriChain);\n', '    }\n', '    \n', '}\n', '\n', '\n', '\n', '// legacy production contract \n', 'contract AgriChainProductionContract   is BaseAgriChainContract    \n', '{  \n', '    string  public  Organization;      //Production Organization\n', '    string  public  Product ;          //Product\n', '    string  public  Description ;      //Description\n', '    address public  AgriChainData;     //ProductionData\n', '    string  public  AgriChainSeal;     //SecuritySeal\n', '    string  public  Notes ;\n', '    \n', '    function   AgriChainProductionContract() public\n', '    { \n', '       AgriChainData=address(this);\n', '    }\n', '    \n', '    function setOrganization(string _Organization)  onlyBy(creator)  onlyIfNotSealed()\n', '    {\n', '          Organization = _Organization;\n', '          EventChangedString(this,&#39;Organization&#39;,_Organization);\n', '\n', '    }\n', '    \n', '    function setProduct(string _Product)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '          Product = _Product;\n', '          EventChangedString(this,&#39;Product&#39;,_Product);\n', '        \n', '    }\n', '    \n', '    function setDescription(string _Description)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '          Description = _Description;\n', '          EventChangedString(this,&#39;Description&#39;,_Description);\n', '    }\n', '    function setAgriChainData(address _AgriChainData)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainData = _AgriChainData;\n', '         EventChangedAddress(this,&#39;AgriChainData&#39;,_AgriChainData);\n', '    }\n', '    \n', '    \n', '    function setAgriChainSeal(string _AgriChainSeal)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         AgriChainSeal = _AgriChainSeal;\n', '         EventChangedString(this,&#39;AgriChainSeal&#39;,_AgriChainSeal);\n', '    }\n', '    \n', '    \n', '     \n', '    function setNotes(string _Notes)  onlyBy(creator)\n', '    {\n', '         Notes =  _Notes;\n', '         EventChanged(this,&#39;Notes&#39;);\n', '    }\n', '}\n', '\n', '\n', '\n', '//LoggedData\n', 'contract AgriChainDataContract   is AgriChainContract    \n', '{  \n', '      string public AgriChainLabel;\n', '      string public AgriChainLabelInt;\n', '      string public AgriChainDescription;\n', '      string public AgriChainDescriptionInt;\n', '      \n', '    \n', '    //main language data  \n', '    function setData(string _Label,string _Description)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '         \n', '          AgriChainLabel=_Label;\n', '          AgriChainDescription=_Description;\n', '          EventChanged(this,&#39;Data&#39;);\n', '    }\n', '   \n', '    //International language data\n', '    function setDataInt(string _LabelInt,string _DescriptionInt)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '          \n', '          AgriChainLabelInt=_LabelInt;\n', '          AgriChainDescriptionInt=_DescriptionInt;\n', '          EventChanged(this,&#39;DataInt&#39;);\n', '    }\n', '   \n', '      \n', '}\n', '\n', '//External DocumentData\n', '//the extenal document is hashed  and chained as described by this contract\n', 'contract AgriChainDocumentContract   is AgriChainDataContract    \n', '{  \n', '     \n', '    string  public  Emitter;      //Organization\n', '\n', '    string  public  Name;         //Name\n', '    string  public  NameInt;         //Name International\n', '\n', '    string  public  FileName;     //FileName\n', '    string  public  FileHash;     //FileHash\n', '    string  public  FileData;     //FileData\n', '   \n', '    string  public  FileNameInt;  //FileName International\n', '    string  public  FileHashInt;  //FileHash International\n', '    string  public  FileDataInt;  //FileData International\n', '\n', '    string  public  Notes ;\n', '    address public  CurrentRevision; \n', '    \n', '    function   AgriChainDocumentContract() public\n', '    {\n', '        CurrentRevision=address(this);\n', '    }\n', '    \n', '    function setDocumentData(string _Emitter,string _Name, string _FileName,string _FileHash,string _FileData)  onlyBy(creator) onlyIfNotSealed()\n', '    {\n', '          Emitter=_Emitter;\n', '          Name=_Name;\n', '          FileName=_FileName;\n', '          FileHash=_FileHash;\n', '          FileData=_FileData;          \n', '          EventChanged(this,&#39;setDocumentData&#39;);\n', '       \n', '    } \n', '    \n', '    function setCurrentRevision(address _Revision)  onlyBy(creator)  \n', '    {\n', '          CurrentRevision = _Revision;\n', '          EventChangedAddress(this,&#39;CurrentRevision&#39;,_Revision);\n', '        \n', '    } \n', '     \n', '     \n', '    function setNotes(string _Notes)  onlyBy(creator)\n', '    {\n', '         Notes =  _Notes;\n', '         \n', '    }\n', '}\n', '\n', '\n', '//Production Quntity counter contract\n', '//the spedified production si accounted by this contract\n', 'contract AgriChainProductionLotContract   is AgriChainDataContract    \n', '{  \n', '    \n', '     int32  public QuantityInitial;\n', '     int32  public QuantityAvailable;\n', '     string public QuantityUnit;\n', '    \n', '    function InitQuantity(int32 _Initial,string _Unit)  onlyBy(creator)  onlyIfNotSealed()\n', '    {\n', '          QuantityInitial = _Initial;\n', '          QuantityAvailable = _Initial;\n', '          QuantityUnit = _Unit;\n', '          EventChangedInt32(this,&#39;QuantityInitial&#39;,_Initial);\n', '\n', '    }\n', '  \n', '    function UseQuantity(int32 _Use)  onlyBy(creator)  \n', '    {\n', '          QuantityAvailable = QuantityAvailable-_Use;\n', '          EventChangedInt32(this,&#39;QuantityAvailable&#39;,QuantityAvailable);\n', '\n', '    }\n', '  \n', '}']