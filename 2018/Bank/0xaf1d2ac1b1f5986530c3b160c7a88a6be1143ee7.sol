['pragma solidity ^0.4.23;\n', '\n', 'contract EthMashChain {\n', '\n', '    address public owner;\n', '    mapping (address => uint) public withdrawals;\n', '\n', '    int round;\n', '    mapping (int => address[3]) public participants;\n', '\n', '    constructor() public {\n', '        owner = msg.sender;\n', '        round = 1;\n', '        participants[1][0] = owner;\n', '    }\n', '\n', '    function publicGetBalance(address player) view public returns (uint) {\n', '        return withdrawals[player];\n', '    }\n', '\n', '    function publicGetState() view public returns (address[3][7]) {\n', '        return [\n', '            participants[round - 6],\n', '            participants[round - 5],\n', '            participants[round - 4],\n', '            participants[round - 3],\n', '            participants[round - 2],\n', '            participants[round - 1],\n', '            participants[round]\n', '        ];\n', '    }\n', '\n', '    function userWithdraw() public {\n', '        require(withdrawals[msg.sender] > 0);\n', '        uint amount = withdrawals[msg.sender];\n', '        withdrawals[msg.sender] = 0;\n', '        msg.sender.transfer(amount);\n', '    }\n', '\n', '    function userRegister() public payable {\n', '        require(msg.value == 105 finney);\n', '        \n', '        withdrawals[owner] += 5 finney;\n', '        participants[round][1] = msg.sender;\n', '\n', '        uint random = (uint(blockhash(block.number - 1)) + uint(participants[round][0]) + uint(participants[round][1]));\n', '\n', '        if (random % 2 == 0) {\n', '            participants[round][2] = participants[round][0];\n', '            withdrawals[participants[round][0]] += 100 finney;\n', '        } else {\n', '            participants[round][2] = participants[round][1];\n', '            withdrawals[participants[round][1]] += 100 finney;\n', '        }\n', '        \n', '        round++;\n', '        participants[round][0] = msg.sender;\n', '    }\n', '}']