['pragma solidity ^0.4.23;\n', '\n', 'contract HTLC {\n', '  address funder;\n', '  address beneficiary;\n', '  bytes32 public secret;\n', '  bytes32 public hashSecret;\n', '  uint public unlockTime;\n', '\n', '  constructor(address beneficiary_, bytes32 hashSecret_, uint lockTime) public {\n', '    beneficiary = beneficiary_;\n', '    hashSecret = hashSecret_;\n', '    unlockTime = now + lockTime * 1 minutes;\n', '  }\n', '\n', '  function() public payable {\n', '    if (funder == 0) {\n', '      funder = msg.sender;\n', '    }\n', '    if (msg.sender != funder) {\n', '      revert();\n', '    }\n', '  }\n', '\n', '  function resolve(bytes32 secret_) public {\n', '    if (sha256(secret_) != hashSecret) {\n', '      revert();\n', '    }\n', '    secret = secret_;\n', '    beneficiary.transfer(address(this).balance);\n', '  }\n', '\n', '  function refund() public {\n', '    if (now < unlockTime) {\n', '      revert();\n', '    }\n', '    funder.transfer(address(this).balance);\n', '  }\n', '}']