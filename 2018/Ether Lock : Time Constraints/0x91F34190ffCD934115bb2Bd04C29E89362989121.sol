['pragma solidity 0.4.24;\n', '\n', 'interface IndexInterface {\n', '    function getBBFarm(uint8) external view returns (BBFarmInterface);\n', '    function getBBFarmID(bytes4) external view returns (uint8);\n', '    function getBackend() external view returns (BackendInterface);\n', '}\n', '\n', 'interface BackendInterface {\n', '    function getDBallotID(bytes32, uint) external view returns (uint256);\n', '}\n', '\n', 'interface BBFarmInterface {\n', '    function getDetails(uint, address) external view returns \n', '        ( bool hasVoted\n', '        , uint nVotesCast\n', '        , bytes32 secKey\n', '        , uint16 submissionBits\n', '        , uint64 startTime\n', '        , uint64 endTime\n', '        , bytes32 specHash\n', '        , bool deprecated\n', '        , address ballotOwner\n', '        , bytes16 extraData \n', '        );\n', '}\n', '\n', '\n', 'contract BBFarmAux2 {\n', '    function _ballotIdToNamespace(uint ballotId) internal pure returns (bytes4) {\n', '        return bytes4(ballotId >> 224);\n', '    }\n', '    \n', '    function getBBFarmAddressFromBallotId(IndexInterface ix, uint256 ballotId) internal view returns (address) {\n', '        return ix.getBBFarm(ix.getBBFarmID(_ballotIdToNamespace(ballotId)));\n', '    }\n', '    \n', '    function getBallotId(BackendInterface ixBackend, bytes32 democHash, uint ballotN) internal view returns (uint ballotId) {\n', '        ballotId = ixBackend.getDBallotID(democHash, ballotN);\n', '    }\n', '    \n', '    function getBBFarmAddressAndBallotId(IndexInterface ix, bytes32 democHash, uint ballotN) external view returns (address bbFarmAddress, uint256 ballotId) {\n', '        ballotId =  getBallotId(ix.getBackend(), democHash, ballotN);\n', '        bbFarmAddress = getBBFarmAddressFromBallotId(ix, ballotId);\n', '    }\n', '    \n', '    function getBallotDetails(uint ballotId, BBFarmInterface bbFarm, address voterAddress) external view returns \n', '        ( bool hasVoted\n', '        , uint nVotesCast\n', '        , bytes32 secKey\n', '        , uint16 submissionBits\n', '        , uint64 startTime\n', '        , uint64 endTime\n', '        , bytes32 specHash\n', '        , bool deprecated\n', '        , address ballotOwner\n', '        , bytes16 extraData \n', '        )\n', '    {\n', '        return bbFarm.getDetails(ballotId, voterAddress);\n', '    }\n', '    \n', '    function ballotIdToDetails(IndexInterface ix, uint ballotId) external view returns \n', '        ( uint nVotesCast\n', '        , bytes32 secKey\n', '        , uint16 submissionBits\n', '        , uint64 startTime\n', '        , uint64 endTime\n', '        , bytes32 specHash\n', '        , bool deprecated\n', '        // , address ballotOwner\n', '        // , bytes16 extraData \n', '        )\n', '    {\n', '        BBFarmInterface bbFarm = ix.getBBFarm(ix.getBBFarmID(_ballotIdToNamespace(ballotId)));\n', '        (, nVotesCast, secKey, submissionBits, startTime, endTime, specHash, deprecated,,) = bbFarm.getDetails(ballotId, address(0));\n', '    }\n', '    \n', '}']