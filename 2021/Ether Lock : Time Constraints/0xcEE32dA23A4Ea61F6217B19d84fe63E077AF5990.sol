['// SPDX-License-Identifier: UNLICENSED\n', '// ALL RIGHTS RESERVED\n', '\n', '// Forked from Uniswap Ethereum mainnet for Sushiswap on Ethereum Mainnet\n', '\n', '// This contract logs all presales on the platform\n', '\n', 'pragma solidity 0.6.12;\n', '\n', 'import "./Ownable.sol";\n', 'import "./EnumerableSet.sol";\n', '\n', 'contract PresaleFactory is Ownable {\n', '    using EnumerableSet for EnumerableSet.AddressSet;\n', '    \n', '    EnumerableSet.AddressSet private presales;\n', '    EnumerableSet.AddressSet private presaleGenerators;\n', '    \n', '    mapping(address => EnumerableSet.AddressSet) private presaleOwners;\n', '    \n', '    event presaleRegistered(address presaleContract);\n', '    \n', '    function adminAllowPresaleGenerator (address _address, bool _allow) public onlyOwner {\n', '        if (_allow) {\n', '            presaleGenerators.add(_address);\n', '        } else {\n', '            presaleGenerators.remove(_address);\n', '        }\n', '    }\n', '    \n', '    /**\n', '     * @notice called by a registered PresaleGenerator upon Presale creation\n', '     */\n', '    function registerPresale (address _presaleAddress) public {\n', "        require(presaleGenerators.contains(msg.sender), 'FORBIDDEN');\n", '        presales.add(_presaleAddress);\n', '        emit presaleRegistered(_presaleAddress);\n', '    }\n', '    \n', '    /**\n', '     * @notice Number of allowed PresaleGenerators\n', '     */\n', '    function presaleGeneratorsLength() external view returns (uint256) {\n', '        return presaleGenerators.length();\n', '    }\n', '    \n', '    /**\n', '     * @notice Gets the address of a registered PresaleGenerator at specified index\n', '     */\n', '    function presaleGeneratorAtIndex(uint256 _index) external view returns (address) {\n', '        return presaleGenerators.at(_index);\n', '    }\n', '    \n', '    /**\n', '     * @notice returns true if the presale address was generated by the Unicrypt presale platform\n', '     */\n', '    function presaleIsRegistered(address _presaleAddress) external view returns (bool) {\n', '        return presales.contains(_presaleAddress);\n', '    }\n', '    \n', '    /**\n', '     * @notice The length of all presales on the platform\n', '     */\n', '    function presalesLength() external view returns (uint256) {\n', '        return presales.length();\n', '    }\n', '    \n', '    /**\n', '     * @notice gets a presale at a specific index. Although using Enumerable Set, since presales are only added and not removed, indexes will never change\n', '     * @return the address of the Presale contract at index\n', '     */\n', '    function presaleAtIndex(uint256 _index) external view returns (address) {\n', '        return presales.at(_index);\n', '    }\n', '    \n', '}']