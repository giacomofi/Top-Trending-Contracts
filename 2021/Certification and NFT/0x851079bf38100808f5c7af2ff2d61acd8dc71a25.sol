['/**\n', ' *Submitted for verification at Etherscan.io on 2021-03-11\n', '*/\n', '\n', 'pragma solidity ^0.5.16;\n', '\n', 'contract RegistryLike {\n', '    function proxies(address user) public view returns(address);\n', '}\n', '\n', 'contract ProxyLike {\n', '    function owner() public view returns(address);\n', '}\n', '\n', 'contract ScoreLike {\n', '    function getUserScore(bytes32 user) external view returns (uint);\n', '    function getGlobalScore() external view returns (uint);\n', '}\n', '\n', 'contract GetCDPLike {\n', '    function getCdpsAsc(address manager, address guy) external view returns (uint[] memory ids, address[] memory urns, bytes32[] memory ilks);\n', '}\n', '\n', '\n', '\n', 'contract MScore {\n', '    RegistryLike constant REGISTRY_PROXY = RegistryLike(0x4678f0a6958e4D2Bc4F1BAF7Bc52E8F3564f3fE4);\n', '    ScoreLike constant JAR_CONNECTOR = ScoreLike(0xf10Bb2Ca172249C715E4F9eE7776b2C8C31aaA69);\n', '    GetCDPLike constant GET_CDP = GetCDPLike(0x36a724Bd100c39f0Ea4D3A20F7097eE01A8Ff573);\n', '    address constant BCDP_MANAGER = address(0x3f30c2381CD8B917Dd96EB2f1A4F96D91324BBed);\n', '    uint constant SCALING_FACTOR = 24 * 60 * 60 * 1000;\n', '    \n', '    function balanceOf(address user) external view returns(uint) {\n', '        address proxy = REGISTRY_PROXY.proxies(user);\n', '        if(proxy == address(0)) return 0;\n', '        if(ProxyLike(proxy).owner() != user) return 0;\n', '        \n', '        (uint[] memory cdps,,) = GET_CDP.getCdpsAsc(BCDP_MANAGER, proxy);\n', '        if(cdps.length == 0) return 0;\n', '        \n', '        return JAR_CONNECTOR.getUserScore(bytes32(cdps[0])) / SCALING_FACTOR;\n', '    }\n', '    \n', '    function totalSupply() external view returns(uint) {\n', '        return JAR_CONNECTOR.getGlobalScore() / SCALING_FACTOR;\n', '    }\n', '    \n', '}']