['/**\n', ' *Submitted for verification at Etherscan.io on 2021-04-10\n', '*/\n', '\n', '/**\n', 'Proposal #5: Add AP reward for DAI, cDAI and WBTC pool\n', 'The new DAI, cDAI and WBTC pools currently have a very low deposit count resulting in a very weak anonymity set. We propose to incentivize pool usage with AP reward without changing the TORN inflation schedule.\n', '\n', '## Specification\n', 'To address the low number of deposits, we propose to add AP rewards for these new pools. **Imporant, adding AP reward does not change the TORN circulating supply schedule**. The AP is swapped for TORN in the same AMM as the currently ongoing ETH pool mining. It means that no additional TORN tokens are put toward mining.\n', '\n', 'The amount of AP earned per block is chose to maximize the amount of deposits in each pool. We propose the following reward rates:\n', ' \n', ' 0.1 WBTC = 15\n', ' 1 WBTC = 120\n', ' 10 WBTC = 1000\n', ' 5k cDAI = 2\n', ' 50k cDAI = 10\n', ' 500k cDAI = 40\n', ' 5m cDAI = 250\n', ' 100 DAI = 2\n', ' 1k DAI = 10\n', ' 10k DAI = 40\n', ' 100k DAI = 250\n', ' 0.1 ETH = 4\n', '\n', 'Note that the reward for the 0.1 ETH pool is changed from 10 to 4 AP per block. The reward for this pool is currently disproportionally high given its current utility at such high gas fees. The AP reward for other ETH pools remains unchanged.\n', '\n', "Only new deposits, made after the proposal is executed, will be eligible for AP rewards (Remember that a proposal is executed the earliest 5 days after the voting period starts, don't deposit before if you want to mine). They will not be any retroactive reward for deposits made prior to the proposal. \n", '\n', 'Regrading the 0.1 ETH pool, AP claimed after the proposal execution will only give 4 AP per block instead of 10. This means that if you want to get 10 AP per block, you need to claim the AP before the proposal execution.\n', '\n', 'Find the proposal contract and its test can be found on this repo:\n', 'https://github.com/tornadocash/mining-proposal\n', '*/\n', '\n', '// File contracts/EnsResolve.sol\n', '\n', '// SPDX-License-Identifier: MIT\n', 'pragma solidity ^0.6.0;\n', 'pragma experimental ABIEncoderV2;\n', '\n', 'interface ENS {\n', '    function resolver(bytes32 node) external view returns (Resolver);\n', '}\n', '\n', 'interface Resolver {\n', '    function addr(bytes32 node) external view returns (address);\n', '}\n', '\n', 'contract EnsResolve {\n', '    function resolve(bytes32 node) public view virtual returns (address) {\n', '        return ENS(0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e).resolver(node).addr(node);\n', '    }\n', '}\n', '\n', '\n', '// File contracts/interfaces/IMiner.sol\n', '\n', 'pragma solidity ^0.6.0;\n', '\n', '\n', 'interface IMiner {\n', '    struct Rate {\n', '        bytes32 instance;\n', '        uint256 value;\n', '    }\n', '\n', '    function setRates(Rate[] memory _rates) external;\n', '}\n', '\n', '\n', '// File contracts/interfaces/ITornadoProxy.sol\n', '\n', '\n', 'pragma solidity ^0.6.0;\n', '\n', '\n', 'interface ITornadoProxy {\n', '    enum InstanceState {DISABLED, ENABLED, MINEABLE}\n', '\n', '    struct Instance {\n', '        bool isERC20;\n', '        address token;\n', '        InstanceState state;\n', '    }\n', '\n', '    struct Tornado {\n', '        address addr;\n', '        Instance instance;\n', '    }\n', '\n', '    function updateInstance(Tornado calldata _tornado) external;\n', '\n', '    function instances(address _tornado) external returns (Instance memory);\n', '}\n', '\n', '\n', '// File contracts/ProposalSetMiningRates.sol\n', '\n', 'pragma solidity ^0.6.0;\n', '\n', '\n', '\n', '\n', 'contract ProposalSetMiningRates is EnsResolve {\n', '    ITornadoProxy immutable public proxy = ITornadoProxy(0x722122dF12D4e14e13Ac3b6895a86e84145b6967);\n', '    IMiner immutable public miner = IMiner(0x746Aebc06D2aE31B71ac51429A19D54E797878E9);\n', '    \n', '    function executeProposal() public {\n', '        IMiner.Rate[] memory rates = new IMiner.Rate[](12);\n', '        rates[0] = IMiner.Rate({ instance: bytes32(0x95ad5771ba164db3fc73cc74d4436cb6a6babd7a2774911c69d8caae30410982), value: 2 }); // dai-100.tornadocash.eth\n', '        rates[1] = IMiner.Rate({ instance: bytes32(0x109d0334da83a2c3a687972cc806b0eda52ee7a30f3e44e77b39ae2a20248321), value: 10 }); // dai-1000.tornadocash.eth\n', '        rates[2] = IMiner.Rate({ instance: bytes32(0x3de4b55be5058f538617d5a6a72bff5b5850a239424b34cc5271021cfcc4ccc8), value: 40 }); // dai-10000.tornadocash.eth\n', '        rates[3] = IMiner.Rate({ instance: bytes32(0xf50559e0d2f0213bcb8c67ad45b93308b46b9abdd5ca9c7044efc025fc557f59), value: 250 }); // dai-100000.tornadocash.eth\n', '        \n', '        rates[4] = IMiner.Rate({ instance: bytes32(0xc9395879ffcee571b0dfd062153b27d62a6617e0f272515f2eb6259fe829c3df), value: 2 }); // cdai-5000.tornadocash.eth\n', '        rates[5] = IMiner.Rate({ instance: bytes32(0xf840ad6cba4dbbab0fa58a13b092556cd53a6eeff716a3c4a41d860a888b6155), value: 10 }); // cdai-50000.tornadocash.eth\n', '        rates[6] = IMiner.Rate({ instance: bytes32(0x8e52ade66daf81cf3f50053e9bfca86a57d685eca96bf6c0b45da481806952b1), value: 40 }); // cdai-500000.tornadocash.eth\n', '        rates[7] = IMiner.Rate({ instance: bytes32(0x0b86f5b8c2f9dcd95382a469480b35302eead707f3fd36359e346b59f3591de2), value: 250 }); // cdai-5000000.tornadocash.eth\n', '        \n', '        rates[8] = IMiner.Rate({ instance: bytes32(0x10ca74c40211fa1598f0531f35c7d54c19c808082aad53c72ad1fb22ea94ab83), value: 15 }); // wbtc-01.tornadocash.eth\n', '        rates[9] = IMiner.Rate({ instance: bytes32(0x6cea0cba8e46fc4ffaf837edf544ba36e5a35503636c6bca4578e965ab640e2c), value: 120 }); // wbtc-1.tornadocash.eth\n', '        rates[10] = IMiner.Rate({ instance: bytes32(0x82c57bf2f80547b5e31b92c1f92c4f8bc02ad0df3d27326373e9f55adda5bd15), value: 1000 }); // wbtc-10.tornadocash.eth\n', '        \n', '        rates[11] = IMiner.Rate({ instance: bytes32(0xc041982b4f77cbbd82ef3b9ea748738ac6c281d3f1af198770d29f75ac32d80a), value: 4 }); // eth-01.tornadocash.eth\n', '        \n', '        // Enable mining on tornado instances\n', '        for (uint256 i = 0; i < rates.length; i++) {\n', '            updateInstance(rates[i].instance, ITornadoProxy.InstanceState.MINEABLE);\n', '        }\n', '\n', '        // Set AP rates on mining contract\n', '        miner.setRates(rates);\n', '    }\n', '\n', '    function updateInstance(bytes32 _instance, ITornadoProxy.InstanceState _state) internal {\n', '        address addr = resolve(_instance);\n', '        ITornadoProxy.Instance memory instance = proxy.instances(addr);\n', '        instance.state = _state;\n', '\n', '        proxy.updateInstance(ITornadoProxy.Tornado({\n', '            addr: addr,\n', '            instance: instance\n', '        }));\n', '    }\n', '}']